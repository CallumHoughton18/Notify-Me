@page "/"
@using notifyme.shared.ViewModels
@using notifyme.server.Components
@using notifyme.server.Shared.Manage_Notifications
@using notifyme.server.Shared.Manage_Subscriptions
@inject CreateNewNotificationViewModel _createNotifVm;  
@inject RegisterNotificationSubscriptionViewModel _subToNotifVm;
@inherits BaseMVVMComponent

<div style="width: 100%">
    <MudPaper Class="pa-8 mt-5">
        <AddNotificationForm NewNotification="@_createNotifVm.QuickNotification" OnSubmit="@HandleSubmit" ></AddNotificationForm>
    </MudPaper>
</div>

<AddSubscription ViewModel="@_subToNotifVm"></AddSubscription>

@code {
    protected override Task OnInitializedAsync()
    {
        BindViewModelToLifeCycle(_createNotifVm);
        return base.OnInitializedAsync();
    }
    
    private void HandleSubmit()
    {
        _createNotifVm.SaveNotification();
    }
}
